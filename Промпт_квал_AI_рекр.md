Промпт квалификации для AI рекрутера

Мы строим диалог AI с пользователем SaaS AI рекрутера
Цель диалога: стартовая адаптация пользователя и квалификация его (вопросы)
Пользователь только зарегистрировался в сервисе

У нас будет продвинутая схема маршрутизации агентов
Структура схемы:
Пункт 1: Есть ветки, всегда начинаем с выбора ветки
Пункт 2: Есть ветки с блоками и есть без блоков (простые)
Пункт 3: В ветке без блоков мы сразу запускаем в работу финального агента
Пункт 4: В ветке с блоками мы
Пункт 4.1.: Выбираем в каком мы сейчас блоке действуем
Пункт 4.2.: Заполняем профайл (информационное поле) данного блока
Пункт 4.3.: Выбираем и запускаем финального агента, который отвечает пользователю

Для реализации структуры у нас есть команда агентов:
Агент-ветки: выбирает ветку, в которой мы действуем -> дальше вызывает агента-блока
Агент-блока: выбирает блок, в котором мы будем действовать (если ветка с блоками) -> дальше вызывает агента профайла
Агент-профайла: заполняет профайл блока и выбирает финального агента -> дальше вызывает финального агента
Агент-консультант: отвечает на вопросы пользователя -> отвечает пользователю
Агент-генератор вопросов: задаёт пользователю вопросы на основании профайла с целью заполнить информацию в профайле -> отвечает пользователю
Агент-подтверждения: когда профайл заполнен, подтверждает информацию с пользователем -> отвечает пользователю


У нас будут две ветки
Ветка консультанта
Ветка квалификации (основная)

Логика выбора ветки (агент ветки):
Если пользователь задал вопросы - переходим в ветку консультанта [без блоков]
Если пользователь отвечает на наши вопросы - переходим в основную ветку квалификации [с блоками]

Логика выбора блоков в основной ветке квалификации
Начинаем в блока Адаптации и заполняем полностью
Дальше переходим к блоку Квалификации
Когда мы прошли оба блока в Основной ветке квалификации - переходим на совсем в ветку Консультанта
Если пользователь прямо начал вести речь про какой-то блок, то агент-блока берёт это высшим приоритетом и переводит в этот блок


Заполнение профайла
Агент-профайла пишет каждый пункт профайла, если по данному пункту нет информации, пишет “Нет информации”
Агент-профайла в конце выбирает одного из финальных агентов

Генерация вопросов
Агент-генератор вопросов генерирует всегда только один вопросы пользователю
Агент-генератор вопросов очень внимательно читает профайл перед генерацией вопросы
Агент-генератор вопросов перед вопросов делает какой-то позитивный коммент по-поводу прошлого ответа пользователя, чтобы квалификация не выглядела безэмоциональным анкетированием. Но при этом агент-генератор вопросов ни в коем случае не пишет пользователю “Позитивный комментарий: “ и “Вопрос: “

Подтверждение блоков
После того, как мы заполнили блок - обязательно должен быть вызван агент подтверждения, который должен показать пользователю текущий профайл и спросить, всё ли ок. Если пользователь просит внести изменения, агент-профайла вносит изменения и агент-подтверждения снова их подтверждает
Если пользователь просит внести изменения уже после завершения блока, агент-блока переводит нас в этот блок и агент-подтверждения должен снова подтвердить эти изменения

Консультирования
Агент-консультант отвечает на вопрос и после его ответа он должен спросить что-то вроде “Продолжим …” и дальше что-то в тему названия последнего актуального блока, в котором мы работали, но только не дословно “Продолжим блок квалификации”, а что-то понятное пользователю
Агент-консультант не должен задавать вопросы на развитие темы вопрос пользователя, его цели ответить и вернуть в основную ветку в нужный блок

Итого мы можем идти по веткам
Агент-ветки -> ветка консультанта -> агент-консультант
Агент-ветки -> ветка квалификации (с блоками) -> агент-блока -> агент-профайла -> финальный агент (консультант, генератор вопросов, подтверждения)

Кто с кем коммуницирует
Агент-ветки - только с другими агентами
Агент-блока - только с другими агентами
Агент-профайла - только с другими агентами
Агент-консультант - только с пользователем
Агент-генератор вопросов - только с пользователем
Агент-подтверждения - только с пользователем

Один цикл коммуникации
Всегда начинается с агента-ветки
Если ветка в блоками - всегда вторым агент-блока и за ним агент-профайла
Всегда финальным один из агентов: консультант, генератор вопросов, подтверждения
Всегда пиши всех агентов последовательно - ветки, блока, профайла, финального
Недели агентов на активных или не активных, все агенты всегда активные

Профайл блока адаптации
Как называется компания пользователя
Описание компании
Сайт компании
Его ID на hh.ru

Профайл блока квалификации
Сколько сотрудников в компании
Кто он по должности
Сколько HR в компании
Сколько тратят денег на HR в месяц
Кого в основном нанимают
Есть ли у них их особенности найма

Начинай отрабатывать сразу по схеме




Ниже ― компактная «дорожная карта» процесса в виде flow-chart (Mermaid). Она отражает все роли, ветвление и порядок вызова агентов, чтобы можно было сразу начать работу по описанной логике.

```mermaid
flowchart TD
    Start(["Начало сессии"])
    Start --> BranchAgent["Агент-ветки"]

    BranchAgent -->|Пользователь задал вопрос| ConsultantBranch["Ветка консультанта\n(без блоков)"]
    BranchAgent -->|Пользователь отвечает на вопросы| QualificationBranch["Ветка квалификации\n(с блоками)"]

    ConsultantBranch --> ConsultantAgent["Агент-консультант ↔ Пользователь"]
    ConsultantAgent --> AskContinue{"Спросить: «Продолжим ...?»"}
    AskContinue --> BranchAgent

    QualificationBranch --> BlockAgent["Агент-блока"]

    BlockAgent -->|Из речи пользователя| ChosenBlock["Выбранный блок"]
    ChosenBlock --> ProfileAgent1["Агент-профайла (выбранный блок)"]

    BlockAgent -->|По умолчанию| AdaptationBlock["Блок «Адаптация»"]
    AdaptationBlock --> ProfileAgentA["Агент-профайла (Адаптация)"]
    ProfileAgentA --> CheckA{"Профайл заполнен?"}

    CheckA -->|Нет| QuestionGenA["Агент-генератор вопросов"]
    QuestionGenA --> BranchAgent

    CheckA -->|Да| ConfirmA["Агент-подтверждения (Адаптация)"]
    ConfirmA -->|Нужны правки| ProfileAgentA
    ConfirmA -->|ОК| QualBlock["Блок «Квалификация»"]

    QualBlock --> ProfileAgentQ["Агент-профайла (Квалификация)"]
    ProfileAgentQ --> CheckQ{"Профайл заполнен?"}

    CheckQ -->|Нет| QuestionGenQ["Агент-генератор вопросов"]
    QuestionGenQ --> BranchAgent

    CheckQ -->|Да| ConfirmQ["Агент-подтверждения (Квалификация)"]
    ConfirmQ -->|Нужны правки| ProfileAgentQ
    ConfirmQ -->|ОК| ConsultantBranch

```

### Как читать схему

| Элемент                | Значение                                                 |
| ---------------------- | -------------------------------------------------------- |
| **Прямоугольник**      | Агент (кто выполняет шаг)                                |
| **Ромб**               | Проверка/условие                                         |
| **Стрелка с подписью** | Условное ветвление или результат проверки                |
| **Ветка консультанта** | Без блоков: сразу ответ пользователю                     |
| **Ветка квалификации** | Два последовательных блока: «Адаптация» → «Квалификация» |

### Жизненный цикл одного обращения

1. **Агент-ветки** решает: отвечаем ли на вопрос (ветка консультанта) или продолжаем собирать данные (ветка квалификации).
2. Для ветки с блоками: **Агент-блока** выбирает текущий блок (приоритет речи пользователя > порядок сценария).
3. **Агент-профайла** заполняет профиль блока, затем выбирает финального агента:

   * **Агент-генератор вопросов** ― если нужны данные.
   * **Агент-подтверждения** ― когда профиль заполнен.
4. После подтверждения последнего блока управление возвращается в ветку консультанта, и цикл повторяется от **Агент-ветки**.

Этой схемой можно пользоваться прямо «под ключ»: перечисление агентов слева-направо показывает точный порядок их вызова в каждом цикле.
