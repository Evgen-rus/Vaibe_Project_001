"""
Файл конфигурации проекта.
Содержит все константы и параметры конфигурации бота.
"""
import os
from pathlib import Path
from dotenv import load_dotenv

# Загрузка переменных окружения из .env файла
load_dotenv()

# Базовые настройки
BASE_DIR = Path(__file__).resolve().parent
DATABASE_PATH = BASE_DIR / "database" / "bot.db"

# Telegram Bot settings
BOT_TOKEN = os.getenv("TELEGRAM_BOT_TOKEN")
ADMIN_IDS = list(map(int, os.getenv("ADMIN_IDS", "").split(","))) if os.getenv("ADMIN_IDS") else []

# OpenAI settings
OPENAI_API_KEY = os.getenv("OPENAI_API_KEY")
OPENAI_MODEL = os.getenv("OPENAI_MODEL", "gpt-4.1-nano")

# Настройки приложения
TRIAL_PERIOD_DAYS = 14  # Длительность триального периода в днях
REMINDER_DAYS_BEFORE = 1  # За сколько дней до окончания триала отправлять напоминание

# Тексты сообщений
WELCOME_MESSAGE = """
Привет! Я бот-нейропродажник, который поможет подобрать оптимальный тариф для вашего бизнеса.
Пройдите небольшой опрос, чтобы я мог сделать персональную рекомендацию.
"""

# Вопросы онбординга
ONBOARDING_QUESTIONS = [
    {
        "id": 1,
        "text": "В какой сфере работает ваш бизнес?",
        "type": "text"
    },
    {
        "id": 2,
        "text": "Какой объем использования вы ожидаете?",
        "type": "options",
        "options": ["Низкий (до 100 запросов в день)", "Средний (100-500 запросов)", "Высокий (более 500 запросов)"]
    },
    {
        "id": 3,
        "text": "Какой у вас месячный бюджет на данный инструмент?",
        "type": "options",
        "options": ["До 2000 руб.", "2000-5000 руб.", "5000-10000 руб.", "Более 10000 руб."]
    },
    {
        "id": 4,
        "text": "Сколько человек в вашей команде будут использовать систему?",
        "type": "options",
        "options": ["1-3", "4-10", "11-50", "Более 50"]
    },
    {
        "id": 5,
        "text": "Какие инструменты вы используете сейчас?",
        "type": "text"
    }
]

# Шаблон запроса к OpenAI для анализа ответов
OPENAI_TARIFF_PROMPT = """
Проанализируй ответы пользователя на вопросы и порекомендуй оптимальный тариф из трех вариантов:

Ответы пользователя:
{answers}

Предложи три тарифа с разными ценами и функциональностью, учитывая ответы пользователя.
Рекомендуй один из них как наиболее подходящий и объясни почему.
""" 